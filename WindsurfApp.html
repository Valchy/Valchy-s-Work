<html>
<head>
<meta charset="utf-8">
<title> Windsurfing App </title>
<script type="text/javascript" src="jquery-3.2.1.min.js"> </script>
<script type="text/javascript" src="jquery-ui.js"> </script>
<link rel="shortcut icon" href="hi.png" type="image/x-icon">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="EverythingCSS.css" type="text/css">
<style type="text/css">
.iPhoneScreen {background-image: linear-gradient(120deg, #89f7fe 0%, #66a6ff 100%); width: 375px; height: 667px; border: 1px solid black; padding: 10px; z-index: 1;}
.titleText {text-align: center; color: #FF0000; text-shadow: -7px 4px 5px black; font-size: 40px; margin: 0px; width: auto; -webkit-text-stroke: 1px black; font-family: 'Montserrat';}
.sideBar {background-image: linear-gradient(to top, #feada6 0%, #f5efef 100%); display: none; padding: 10px; margin: -10px 0px 0px -10px; position: relative; z-index: 999999; width: 100%; height: 100%;}
.topSideBar {display: flex; flex-direction: row; align-items: center; justify-content: space-between;}
.topSideBarText {display: flex; flex-direction: column; text-align: center;}
.topSideBarText span {margin: 5px;}
.lineDiv {height: 100px; width: 0px; border-left: 1px solid black;}
.profilePicture {border-radius: 50%; border: 1px solid black; width: 200px; height: 200px; background-image: url('avatar background.jpg'); background-size: cover; background-repeat: no-repeat; background-position: 50% 50%;}
.menuIconDiv {float: left; display: flex; align-items: center; justify-content: center; align-content: center; border-radius: 50%; background-color: lightgreen; width: 40px; height: 40px; border: 1px solid black; transition: all 0.5s ease 0s; -webkit-transition: all 0.5s ease 0s;}
.menuIconDiv:hover {cursor: pointer; background-color: white;}
.theHomeButton {}
.searchPage {display: none;}
.top-div-search-bar {display: flex; justify-content: center; background-color: yellow; padding: 10px;}
.top-div-seach-bar input:focus {outline: none; outline-color: red;} /* needs fixing */
</style>
</head>

<body>
<div id="mainBarOthers" class="mainBarOthers">
	<ul class="theUl" id="theUl">	
	</ul>
</div>

<div class="mainPage">
	<h1> Windsurfing App </h1>

	<div class="iPhoneScreen">
		<div class="sideBar">
			<div class="topSideBar">
				<div class="profilePicture"></div>
				<div class="lineDiv"></div>
				<div class="topSideBarText">
					<span> ValchyGaming </span> <span> Advanced </span> <span> 2 years Premium </span>
				</div>
			</div>

			<div class="theHomeButton">
				<svg fill="#000000" height="48" viewBox="0 0 24 24" width="48" xmlns="http://www.w3.org/2000/svg"><path fill="#000000" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/><path d="M0 0h24v24H0z" fill="none"/></svg>
			</div>
			<div class="theSearchButton">
				<svg fill="#000000" height="48" viewBox="0 0 24 24" width="48" xmlns="http://www.w3.org/2000/svg"><path fill="#000000" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/><path d="M0 0h24v24H0z" fill="none"/></svg>
			</div>
		</div>

		<div class="homePage">
			<div class="menuIconDiv">
				<svg fill="#000000" id="svgMenu" height="48" viewBox="0 0 24 24" width="48" xmlns="http://www.w3.org/2000/svg"> <path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
			</div>
			<h2 class="titleText"> Windsurf It </h2>
		</div>

		<div class="searchPage">
			<div class="top-div-search-bar">
				<input type="text" name="placeSearch" id="searchInputPlace" placeholder="Search!...">
				<button onclick="placeSearch();"> Search </button>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript" src="EverythingJS.js"> </script>
<script type="text/javascript">
var theAddress, theCoordinates;
onLoad();

$('.menuIconDiv').on('click', function () {
	$('.sideBar').show('slide', {direction: 'left'}, 900);
	$('.homePage').hide();
});

$('.theHomeButton').on('click', function () {
	$('.sideBar').hide('slide', {direction: 'left'}, 900);
	$('.homePage').delay(900).show();
});

$('.theSearchButton').on('click', function () {
	$('.sideBar').hide('slide', {direction: 'left'}, 900);
	$('.searchPage').delay(900).show();
});

function onLoad () {
	//placeSearch();
}

function placeSearch () {
	theAddress = document.getElementById('searchInputPlace').value;
	var data = new XMLHttpRequest();
	data.open('GET', 'https://maps.googleapis.com/maps/api/geocode/json?address='+theAddress+'&key=AIzaSyDiFE9UorPlqCnUF_clKDE_grGfVLded1o');

	data.onload = function () {
		if (data.status >= 200 && data.status < 400) {
			var ourData = JSON.parse(data.responseText);
			theCoordinates = ourData.results[0].geometry.location;
			getLocationKey(theCoordinates);
		}
		else {
			console.log('server error');
		}
	};

	data.onerror = function () {
		console.log('connection error');
	}

	data.send();
}

function getLocationKey (coords) {
	var thePlace = new XMLHttpRequest();
	thePlace.open('GET', 'https://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=jCtpB1xGGrd41uitWUvyPQ1vM3E0RQ0J&q='+coords.lat+'%2C'+coords.lng+'&language=en-us&details=false&toplevel=false');

	thePlace.onload = function () {
		if (thePlace.status >= 200 && thePlace.status < 400) {
			var theJSON = JSON.parse(thePlace.responseText);
			getForecast(theJSON.Key);
		}
		else {
			console.log('server error');
		}
	};

	thePlace.onerror = function () {
		console.log('connection error');
	}

	thePlace.send();
}

function getForecast (key) {
	var theForecast = new XMLHttpRequest();
	theForecast.open('GET', 'https://dataservice.accuweather.com/forecasts/v1/daily/15day/'+key+'?apikey=jCtpB1xGGrd41uitWUvyPQ1vM3E0RQ0J&language=en-us&details=false&metric=true');

	theForecast.onload = function () {
		if (theForecast.status >= 200 && theForecast.status < 400) {
			var theData = JSON.parse(theForecast.responseText);
			console.log(theData);
		}
		else {
			console.log('server error');
		}
	};

	theForecast.onerror = function () {
		console.log('connection error');
	}

	theForecast.send();
}
</script>
</body>
</html>

<!--
Make an basic app which you can add/remove locations. Everytime wind is above specific number alert user
-->