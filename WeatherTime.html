<html>
<head>
<meta charset="utf-8">
<title> Weather &amp; Time </title>
<script type="text/javascript" src="jquery-3.2.1.min.js"> </script>
<link rel="shortcut icon" href="hi.png" type="image/x-icon">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="EverythingCSS.css" type="text/css">
<style type="text/css">
button:hover {cursor: pointer;}
</style>
</head>

<body>
<div id="mainBarOthers" class="mainBarOthers">
	<ul class="theUl" id="theUl">	
	</ul>
</div>

<div class="mainPage">
	<h1> Using API (AJAX &amp; AJAX) to show local Weather and Time </h1>

	<button onclick="getLocation();">
		Get my Location
	</button>

	<div id="DivID"></div>
</div>

<script type="text/javascript" src="EverythingJS.js"> </script>
<script type="text/javascript">
var x = document.getElementById('DivID');
var userLAT;
var userLON;

function pullingInformation () {
	var data = new XMLHttpRequest();
	data.open('GET', 'http://api.openweathermap.org/data/2.5/weather?lat='+userLAT+'&lon='+userLON+'&appid=ce08873d7abcedcca577c81c3a1d0689');

	data.onload = function () {
		if (data.status >= 200 && data.status < 400) {
			var ourData = JSON.parse(data.responseText);
		}
		else {
			$('#DivID').html('Server failure, please try again!');
		}
	};

	data.onerror = function () {
		$('#DivID').html('Connecr error ocurred, please try again!');
	}

	data.send();
}

function getLocation() {
    if (navigator.geolocation) {
       userData = navigator.geolocation.getCurrentPosition();
       console.log(userData)
    } else { 
        x.innerHTML = "Geolocation is not supported by this browser.";
    }

    pullingInformation();
}

function showError(error) {
    switch(error.code) {
        case error.PERMISSION_DENIED:
            x.innerHTML = "User denied the request for Geolocation."
            break;
        case error.POSITION_UNAVAILABLE:
            x.innerHTML = "Location information is unavailable."
            break;
        case error.TIMEOUT:
            x.innerHTML = "The request to get user location timed out."
            break;
        case error.UNKNOWN_ERROR:
            x.innerHTML = "An unknown error occurred."
            break;
    }
}

function showPosition(position) {
    var latlon = position.coords.latitude + "," + position.coords.longitude;

    var img_url = "https://maps.googleapis.com/maps/api/staticmap?center="+latlon+"&zoom=14&size=400x300&sensor=false&key=YOUR_:KEY";

    document.getElementById("mapholder").innerHTML = "<img src='"+img_url+"'>";
}
</script>
</body>
</html>

<!--
Use an api from a weather and time website and use the information (ajax json) to show the current weather and time on the usrs city. Make it look nice and then also impliment it
on the actual website :D
-->